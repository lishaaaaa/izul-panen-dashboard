{% extends "base.html" %}
{% block content %}
<div class="grid">

  <!-- HEADER + FILTER -->
  <div class="card span-12">
    <h2 style="margin:0 0 10px">Izul Panen Dashboard</h2>

    <div style="display:flex;gap:14px;align-items:flex-end;flex-wrap:wrap">
      <div>
        <label><b>Tanggal</b></label><br/>
        <select id="dateSelect"></select>
      </div>
      <button id="btnLoad">Tampilkan</button>

      <div id="badges" style="display:flex;gap:8px;flex-wrap:wrap;margin-left:auto"></div>
    </div>
  </div>

  <!-- TABEL PER SEKSI -->
  <div id="tablesWrap" class="card span-12"></div>

  <!-- GRAFIK -->
  <div class="card span-12">
    <h3 style="margin:0 0 10px">Grafik per Seksi (Bulanan & Tahunan)</h3>

    <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:flex-end;margin-bottom:10px">
      <div>
        <label>Bulan</label><br/>
        <select id="monthSelect"></select>
      </div>
      <div>
        <label>Tahun (Bulanan)</label><br/>
        <select id="yearSelectMonth"></select>
      </div>
      <div>
        <label>Tahun (Tahunan)</label><br/>
        <select id="yearSelectYear"></select>
      </div>
      <button id="btnLoadCharts">Tampilkan Grafik</button>
    </div>

    <div id="chartsWrap" class="grid" style="grid-template-columns:1fr 1fr;gap:22px"></div>
  </div>
</div>

<style>
  .badge {
    display:inline-block; padding:8px 12px; border-radius:999px;
    background:#f3f4f6; border:1px solid #e5e7eb; font-weight:600;
  }
  .seksi-title { margin:18px 0 8px; font-weight:700; }
  table { width:100%; border-collapse:collapse }
  th, td { padding:10px; border-bottom:1px solid #eee; }
  .total-row td { font-weight:700; }
  /* bikin kanvas stabil & horizontal bars enak dilihat */
  .canvas-box { border:1px solid #eee; border-radius:12px; padding:12px; background:#fff; height:320px; }
  .canvas-box canvas { width:100% !important; height:100% !important; }
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script defer src="{{ url_for('static', filename='app.js') }}"></script>
{% endblock %}
