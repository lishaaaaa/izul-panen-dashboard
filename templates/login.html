{% extends "base.html" %}
{% block content %}
<div class="card" style="max-width:420px">
  <h3>Login</h3>
  <form id="loginForm">
    <div><label>Username</label><br/><input name="username" required/></div>
    <div style="margin-top:8px"><label>Password</label><br/><input type="password" name="password" required/></div>
    <button style="margin-top:12px">Masuk</button>
  </form>
  <p id="loginMsg" style="color:#d33;margin-top:10px"></p>
</div>
<script>
document.getElementById('loginForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const fd = new FormData(e.target);
  const res = await fetch('/login', {method:'POST', body:fd});
  const j = await res.json();
  if(j.ok){ location.href='/dashboard'; } else {
    document.getElementById('loginMsg').textContent = j.error || 'Gagal login';
  }
});
</script>
{% endblock %}
